name: Docker Image CI

on:
  push:
    branches:
      - 'work'
    tags:
      - 'v*'    # 只有创建 v tag 的时候才构建

jobs:
  CompileBook:
  # 基础运行环境
    runs-on: ubuntu-latest
    steps:
    # 拉取代码
      - name: Pull Code
      - uses: actions/checkout@v3
        with:
          submodules: true  # Fetch Hugo themes (true OR recursive)
          fetch-depth: 0    # Fetch all history for .GitInfo and .Lastmod
          
      - name: View Code
      - run: echo "💡 The ${{ github.repository }} repository has been cloned to the runner."
      - run: echo "🖥️ The workflow is now ready to test your code on the runner."
      - run: ls -lah
      # 安装、还原 依赖
      - run: yarn -i

